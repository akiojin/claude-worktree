# タスク: Codex CLI対応（claude-worktree起動時のツール選択）

このファイルは、実施した作業内容に沿った現実的なタスク群へ圧縮・更新しています。未了タスクは今後の改善ポイントとして残します。

## 概要
- 対象: `src/index.ts`、`src/ui/prompts.ts`、`src/claude.ts`、`src/codex.ts`
- 目的: 起動時のAIツール選択（Claude/Codex）、`--tool` 直指定、`--` パススルー、ヘルプ更新

## 実装タスク（完了分）
- [x] T001 ツール可用性チェックの追加（Claude/Codex）
- [x] T002 ツール選択UIの実装（両方可用時に表示、不可用は無効表示）
- [x] T003 `--tool <claude|codex>` オプションの追加（無効値のエラー表示含む）
- [x] T004 `--` 以降の引数を選択ツールへパススルー
- [x] T005 Claude Code ランチャーの拡張（mode/skipPermissions/extraArgs）
- [x] T006 Codex CLI ランチャーの追加（mode/extraArgs）
- [x] T007 実行モード選択UIをツール名に応じた表示へ汎用化
- [x] T008 CLIヘルプへ `--tool` とパススルーの使用例を追記
- [x] T009 specs（spec.md/plan.md）のチェックリスト更新（要確認の解消）
- [x] T010 markdownlint 準拠の確認（エラー/警告ゼロ）
- [x] T011 コミット＆プッシュ、PR 作成導線の準備

## 残タスク（任意/推奨）
- [ ] T101 直接指定/対話選択/キャンセルの最小統合テスト雛形を追加（tests/integration）
- [ ] T102 `--tool codex` 時のパススルー引数の互換性検証（Codex CLI 実機）
- [ ] T103 仕様に沿ったREADMEの使用例追記（`--tool` と `--` のサンプル）
- [ ] T104 持続的改善用のE2E手順（quickstart.md のシナリオに沿った確認スクリプト化）

## 完了条件（今回スコープ）
- [x] `claude-worktree --help` に `--tool` とパススルー使用例が表示される
- [x] 片方のみ可用時は自動選択、両方可用時は選択UIが表示される
- [x] 無効な `--tool` 値指定でエラーメッセージが出る
- [x] 選択ツールに応じて実行モード選択UIが正しい文言になる

## メモ
- 選択履歴は保存せず、両方可用時は毎回選択（仕様 FR-008）
- 継続/再開（-c/-r）フローは既存どおりClaude向け（必要があればCodex拡張を別タスクで）

---
*本タスク一覧は実装実績に同期済み。追加テストやドキュメントの拡張は「残タスク」に整理しています。*
