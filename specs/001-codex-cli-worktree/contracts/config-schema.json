{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Worktree Configuration Schema",
  "description": "Schema for ~/.worktree/config.json file",
  "type": "object",
  "required": ["version", "preferences"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Configuration file version (semver)"
    },
    "defaultTool": {
      "type": ["string", "null"],
      "enum": ["claude", "codex", null],
      "description": "Default tool to use when not specified"
    },
    "lastSelection": {
      "type": ["string", "null"],
      "enum": ["claude", "codex", null],
      "description": "The last tool that was selected"
    },
    "selectionHistory": {
      "type": "array",
      "maxItems": 100,
      "description": "History of tool selections",
      "items": {
        "type": "object",
        "required": ["tool", "timestamp", "source"],
        "properties": {
          "tool": {
            "type": "string",
            "enum": ["claude", "codex"]
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "source": {
            "type": "string",
            "enum": ["interactive", "cli-option", "default"]
          },
          "sessionId": {
            "type": "string",
            "format": "uuid"
          }
        }
      }
    },
    "preferences": {
      "type": "object",
      "required": ["rememberSelection", "showWelcomeMessage", "colorOutput"],
      "properties": {
        "rememberSelection": {
          "type": "boolean",
          "default": true,
          "description": "Remember the last selection for next time"
        },
        "showWelcomeMessage": {
          "type": "boolean",
          "default": true,
          "description": "Show welcome message on startup"
        },
        "autoSelectTimeout": {
          "type": ["number", "null"],
          "minimum": 0,
          "description": "Auto-select timeout in milliseconds (null = disabled)"
        },
        "colorOutput": {
          "type": "boolean",
          "default": true,
          "description": "Use colored terminal output"
        }
      }
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "version": "1.0.0",
      "defaultTool": "claude",
      "lastSelection": "claude",
      "selectionHistory": [
        {
          "tool": "claude",
          "timestamp": "2025-01-06T10:00:00Z",
          "source": "interactive",
          "sessionId": "550e8400-e29b-41d4-a716-446655440000"
        }
      ],
      "preferences": {
        "rememberSelection": true,
        "showWelcomeMessage": true,
        "colorOutput": true
      }
    }
  ]
}